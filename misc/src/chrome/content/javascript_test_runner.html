<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head profile="http://selenium-ide.openqa.org/profiles/test-case">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Embedded tests for SeLite Misc</title>
    </head>
    <body onload="invoke()" id="body">
        <script type="text/javascript">
        //<![CDATA[
            "use strict";
            function invoke() {
                var fileURL= '';
                var error;
                var unescapehtml= Components.classes["@mozilla.org/feed-unescapehtml;1"].getService(Components.interfaces.nsIScriptableUnescapeHTML);
                var body= document.getElementById('body');
                try {
                    var subScriptLoader = Components.classes["@mozilla.org/moz/jssubscript-loader;1"].getService(Components.interfaces.mozIJSSubScriptLoader);
                    fileURL= (''+window.location.search).substring(1);
                    // subScriptLoader.loadSubScript() caches the scripts. Therefore I add a timestamp to the file name.
                    subScriptLoader.loadSubScript( fileURL+'?' +Date.now(), {}, 'utf-8' );
                }
                catch( e ) {
                    body.appendChild( unescapehtml.parseFragment( 'Failed when loading or running ' +fileURL+ '<br/>', false, null, body ) );
                    body.appendChild( unescapehtml.parseFragment( (''+e).replace('\n', '<br/>'), false, null, body ) );
                    if( !e.messageContainsStackAddedBySeLiteMisc ) {
                        body.appendChild( unescapehtml.parseFragment( '<br/>' +e.stack.replace('\n', '<br/>'), false, null, body ) );
                    }
                    error= e;
                }
                if( !error ) {
                    body.appendChild( unescapehtml.parseFragment( 'OK', false, null, body ) );
                }
            }
        //]]>
        </script>
    </body>
</html>