<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- When I just used HMTL 5 !DOCTYPE html at the top, Firefox 37 didn't process the file; instead, it showed element content, including JS code. -->
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Selenese reference for an SeLite add-on</title>
        <script type="text/javascript">
            //<![CDATA[
            "use strict";
            // Based on see http://www.w3schools.com/xsl/xsl_client.asp. See that page for IE.
            function loadXMLDoc(filename)
            {
              var xhttp = new XMLHttpRequest();
              xhttp.open("GET", filename, false);
              xhttp.send("");
              return xhttp.responseXML;
            }

            function displayResult()
            {debugger;
              var bodyElement= document.getElementById("body");
              if( window.location.search ) {
                  var xml = loadXMLDoc( (''+window.location.search).substring(1) );
                  var xsl = loadXMLDoc( "selenese_reference_to_html.xsl" );
                  var xsltProcessor = new XSLTProcessor();
                  xsltProcessor.importStylesheet(xsl);
                  var resultDocument = xsltProcessor.transformToFragment(xml, document);
                  bodyElement.appendChild(resultDocument);
              }
              else {
                  bodyElement.appendChild( document.createTextNode('Please invoke with ?path/to/file.xml') );
              }
            }
            //]]>
        </script>
    </head>
    <body onload="displayResult();" id="body">
    </body>
</html>